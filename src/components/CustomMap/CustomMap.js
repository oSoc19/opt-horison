// @flow
import React, { Component } from 'react';
import PropTypes from 'prop-types';

import ReactMapboxGl, { Layer, Feature } from 'react-mapbox-gl';
import PoiLayer from '../PoiLayer/PoiLayer.js';
import PointSets from '../../../data/pointsets.js';

const Map = ReactMapboxGl({
    accessToken: process.env.REACT_APP_MABPOX_TOKEN,
});

class CustomMap extends Component {
	static defaultProps = {};

    constructor() {
        this.state = {
            polygons: [{
                "type":"FeatureCollection",
                "features":[
                    {
                        "type":"Feature",
                        "geometry":{
                            "type": "Polygon",
                            "coordinates":[
                                [
                                    [
                                        4.347819637392174,
                                        50.84782905217479
                                    ],
                                    [
                                        4.349189875159761,
                                        50.848997720089095
                                    ],
                                    [
                                        4.350060333079033,
                                        50.84913574793822
                                    ],
                                    [
                                        4.350825890342838,
                                        50.849246222979815
                                    ],
                                    [
                                        4.352761662432139,
                                        50.84944275037694
                                    ],
                                    [
                                        4.352907334658213,
                                        50.84945336247095
                                    ],
                                    [
                                        4.354458151696198,
                                        50.84921054477823
                                    ],
                                    [
                                        4.354516681220194,
                                        50.84919683804159
                                    ],
                                    [
                                        4.356297399647845,
                                        50.84872509631757
                                    ],
                                    [
                                        4.356313479077927,
                                        50.848718630205056
                                    ],
                                    [
                                        4.357398320660282,
                                        50.84797678686095
                                    ],
                                    [
                                        4.357507000971053,
                                        50.84777522538478
                                    ],
                                    [
                                        4.357533566523195,
                                        50.84767933989446
                                    ],
                                    [
                                        4.357546907141798,
                                        50.84752945755167
                                    ],
                                    [
                                        4.357591557252174,
                                        50.84640556112714
                                    ],
                                    [
                                        4.357045733788022,
                                        50.84525184759866
                                    ],
                                    [
                                        4.357014781982776,
                                        50.84520750247388
                                    ],
                                    [
                                        4.356648182559051,
                                        50.84477809197598
                                    ],
                                    [
                                        4.354339964843542,
                                        50.84357983625293
                                    ],
                                    [
                                        4.352476936463935,
                                        50.84336556595746
                                    ],
                                    [
                                        4.348857167784605,
                                        50.84360897014205
                                    ],
                                    [
                                        4.348161187161198,
                                        50.84462639932587
                                    ],
                                    [
                                        4.347911625645977,
                                        50.84504877453866
                                    ],
                                    [
                                        4.347908373840762,
                                        50.84506167918195
                                    ],
                                    [
                                        4.347569564492604,
                                        50.846754379071555
                                    ]
                                ],
                                [
                                    [
                                        4.347819637392174,
                                        50.84782905217479
                                    ],
                                    [
                                        4.349189875159761,
                                        50.848997720089095
                                    ],
                                    [
                                        4.350060333079033,
                                        50.84913574793822
                                    ],
                                    [
                                        4.350825890342838,
                                        50.849246222979815
                                    ],
                                    [
                                        4.352761662432139,
                                        50.84944275037694
                                    ],
                                    [
                                        4.352907334658213,
                                        50.84945336247095
                                    ],
                                    [
                                        4.354458151696198,
                                        50.84921054477823
                                    ],
                                    [
                                        4.354516681220194,
                                        50.84919683804159
                                    ],
                                    [
                                        4.356297399647845,
                                        50.84872509631757
                                    ],
                                    [
                                        4.356313479077927,
                                        50.848718630205056
                                    ],
                                    [
                                        4.357398320660282,
                                        50.84797678686095
                                    ],
                                    [
                                        4.357507000971053,
                                        50.84777522538478
                                    ],
                                    [
                                        4.357533566523195,
                                        50.84767933989446
                                    ],
                                    [
                                        4.357546907141798,
                                        50.84752945755167
                                    ],
                                    [
                                        4.357591557252174,
                                        50.84640556112714
                                    ],
                                    [
                                        4.357045733788022,
                                        50.84525184759866
                                    ],
                                    [
                                        4.357014781982776,
                                        50.84520750247388
                                    ],
                                    [
                                        4.356648182559051,
                                        50.84477809197598
                                    ],
                                    [
                                        4.354339964843542,
                                        50.84357983625293
                                    ],
                                    [
                                        4.352476936463935,
                                        50.84336556595746
                                    ],
                                    [
                                        4.348857167784605,
                                        50.84360897014205
                                    ],
                                    [
                                        4.348161187161198,
                                        50.84462639932587
                                    ],
                                    [
                                        4.347911625645977,
                                        50.84504877453866
                                    ],
                                    [
                                        4.347908373840762,
                                        50.84506167918195
                                    ],
                                    [
                                        4.347569564492604,
                                        50.846754379071555
                                    ]
                                ]
                            ]
                        },
                        "properties":{
                            "time":300
                        }
                    }
                ]
            }],
            points: [PointSets.getAllPointSets()[0]]
        };
    }

	render() {
		return (
		<Map
			style="mapbox://styles/mapbox/streets-v11"
			center={[4.352440, 50.846480]} // hardcoded center point in Brussels
			containerStyle={{
				height: "100vh",
				width: "100vw"
			}}>
            <PoiLayer polygons={this.state.polygons} points={this.state.points}>
            </PoiLayer>
		</Map>
		);
	}
}

CustomMap.defaultProps = {};
CustomMap.propTypes = {};

export default CustomMap;
